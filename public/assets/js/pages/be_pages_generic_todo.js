/*
 *  Document   : be_pages_generic_todo.js
 *  Author     : pixelcave
 */
var BeTasks=function(){var t,a,s,e,n,r,d,l,o,c,i,k=function(){a=jQuery(".js-tasks"),s=jQuery("#js-task-form"),e=jQuery("#js-task-input"),r=jQuery(".js-task-list"),d=jQuery(".js-task-list-starred"),l=jQuery(".js-task-list-completed"),o=jQuery(".js-task-badge"),c=jQuery(".js-task-badge-starred"),i=jQuery(".js-task-badge-completed"),t=10,u(),s.on("submit",function(t){t.preventDefault(),n=e.prop("value"),n&&(j(n),e.prop("value","").focus())});var k,h;a.on("click",".js-task-status",function(t){t.preventDefault(),k=jQuery(this).closest(".js-task"),h=k.attr("data-task-id"),"true"===k.attr("data-task-completed")?y(h):g(h)});var m,Q;a.on("click",".js-task-star",function(){m=jQuery(this).closest(".js-task"),Q=m.attr("data-task-id"),"true"===m.attr("data-task-starred")?b(Q):f(Q)}),a.on("click",".js-task-remove",function(){m=jQuery(this).closest(".js-task"),Q=m.attr("data-task-id"),p(Q)})},u=function(){o.text(r.children().length||""),c.text(d.children().length||""),i.text(l.children().length||"")},j=function(a){r.prepend('<div class="js-task block block-rounded mb-5 animated fadeIn" data-task-id="'+t+'" data-task-completed="false" data-task-starred="false"><table class="table table-borderless table-vcenter mb-0"><tr><td class="text-center" style="width: 50px;"><label class="js-task-status css-control css-control-primary css-checkbox py-0"><input type="checkbox" class="css-control-input"><span class="css-control-indicator"></span></label></td><td class="js-task-content font-w600">'+jQuery("<span />").text(a).html()+'</td><td class="text-right" style="width: 100px;"><button class="js-task-star btn btn-sm btn-alt-warning" type="button"><i class="fa fa-star-o"></i></button> <button class="js-task-remove btn btn-sm btn-alt-danger" type="button"><i class="fa fa-times"></i></button></td></tr></table></div>'),u(),t++},p=function(t){jQuery('.js-task[data-task-id="'+t+'"]').remove(),u()},f=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-starred",!0),a.find(".js-task-star > i").toggleClass("fa-star fa-star-o"),"false"===a.attr("data-task-completed")&&a.prependTo(d),u())},b=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-starred",!1),a.find(".js-task-star > i").toggleClass("fa-star fa-star-o"),"false"===a.attr("data-task-completed")&&a.prependTo(r),u())},y=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-completed",!1),a.find(".table").toggleClass("bg-body-light"),a.find(".js-task-status > input").prop("checked",!1),a.find(".js-task-content > del").contents().unwrap(),"true"===a.attr("data-task-starred")?a.prependTo(d):a.prependTo(r),u())},g=function(t){var a=jQuery('.js-task[data-task-id="'+t+'"]');a.length>0&&(a.attr("data-task-completed",!0),a.find(".table").toggleClass("bg-body-light"),a.find(".js-task-status > input").prop("checked",!0),a.find(".js-task-content").wrapInner("<del></del>"),a.prependTo(l),u())};return{init:function(){k()}}}();jQuery(function(){BeTasks.init()});
