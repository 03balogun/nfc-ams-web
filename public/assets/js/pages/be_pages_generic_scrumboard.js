/*
 *  Document   : be_pages_generic_scrumboard.js
 *  Author     : pixelcave
 */
var BeScrumBoard=function(){var a,t,e,s,o,r,i=function(a){"refresh"===a?(jQuery(".scrumboard-items.js-draggable-enabled").sortable("destroy"),i()):jQuery(".scrumboard-items").addClass("js-draggable-enabled").sortable({connectWith:".scrumboard-items",items:".scrumboard-item",dropOnEmpty:!0,opacity:.75,handle:".scrumboard-item-handler",placeholder:"scrumboard-item-placeholder",tolerance:"pointer",start:function(a,t){t.placeholder.css({height:t.item.outerHeight(),"margin-bottom":t.item.css("margin-bottom")})}})};return{init:function(){a=jQuery(".js-scrumboard"),jQuery("#main-container").addClass("d-flex align-items-stretch"),a.fadeTo(1e3,1),a.on("submit.cb.sb.card.add",'form[data-toggle="sb-card-add"]',function(a){a.preventDefault(),o=jQuery(this).find("input"),(r=o.prop("value"))&&(o.parents(".scrumboard-col").before('<div class="scrumboard-col block block-themed"><div class="block-header bg-primary"><h3 class="block-title font-w600">'+jQuery("<span />").text(r).html()+'</h3><div class="block-options"><div class="dropdown"><button type="button" class="btn-block-option" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-fw fa-ellipsis-v"></i></button><div class="dropdown-menu dropdown-menu-right"><a class="dropdown-item" href="javascript:void(0)"><i class="fa fa-fw fa-pencil mr-5"></i>Edit</a><div class="dropdown-divider"></div><a class="dropdown-item" href="javascript:void(0)" data-toggle="block-option" data-action="close"><i class="fa fa-fw fa-times text-danger mr-5"></i>Delete</a></div></div></div></div><div class="block-content block-content-full bg-body-light"><form class="w-100" method="post" data-toggle="sb-item-add"><div class="input-group"><div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-lightbulb-o"></i></span></div><input type="text" class="form-control" placeholder="New Idea.."></div></form></div><div class="scrumboard-items block-content"></div></div>'),o.prop("value",""),i("refresh"))}),a.on("submit.cb.sb.item.add",'form[data-toggle="sb-item-add"]',function(a){a.preventDefault(),t=jQuery(this).parents(".scrumboard-col").find(".scrumboard-items"),e=jQuery(this).find("input"),(s=e.prop("value"))&&(t.prepend('<div class="scrumboard-item"><div class="scrumboard-item-options"><a class="scrumboard-item-handler btn btn-sm btn-alt-warning" href="javascript:void(0)"><i class="fa fa-hand-grab-o"></i></a> <button class="btn btn-sm btn-alt-warning" data-toggle="sb-item-remove"><i class="fa fa-close"></i></button></div><div class="scrumboard-item-content">'+jQuery("<span />").text(s).html()+"</div></div>"),e.prop("value","").focus(),i("refresh"))}),a.on("click.cb.sb.item.remove",'button[data-toggle="sb-item-remove"]',function(a){jQuery(this).parents(".scrumboard-item").remove()}),i()}}}();jQuery(function(){BeScrumBoard.init()});
